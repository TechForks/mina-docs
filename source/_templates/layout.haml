!!!
%html
  %head
    %title= here.title

    %meta(charset='UTF-8')
    -# Use the latest IE engine, or Chrome frame.
    %meta(http-equiv='X-UA-Compatible' content='IE=edge,chrome=1')

    -# Mobile viewport optimization. j.mp/bplateviewport
    %meta(name='viewport' content='width=device-width, initial-scale=1.0')

    -# Standard SEO data
    -# - if here.data.keywords
    -#   %data{:name => 'keywords', :content => here.data.keywords}
    -# - if here.data.description
    -#   %data{:name => 'description', :content => here.data.description}

    = stylesheet_link_tag 'site.css'

    %script{src: 'http://cachedcommons.org/cache/prettify/1.0.0/javascripts/prettify-min.js', type: 'text/javascript'}
    %script{src: 'http://cdnjs.cloudflare.com/ajax/libs/jquery/1.6.2/jquery.min.js', type: 'text/javascript'}

    = javascript_include_tag 'proscribe.js'

  %body
    #top
      %a#logo{href: rel('/')}
        = site_name

    #area
      #content
        %section#search
          %input{type: "text", placeholder: "Search..."}
          %ul.results

        %div.c
          #crumbs
            - here.breadcrumbs[0..-2].each do |p|
              %a{href: rel(p.path)}= p
              %span.gt!= "&rarr;"

            %strong= here

          %hgroup
            %h1= here.title
            - if here.data.brief
              %h5= here.data.brief

          .content
            - if here.data.usage
              %h2 Usage
              %pre= here.data.usage

            != yield

            -# != partial '_templates/subindex', :locals => { :from => here }

            -# ----------------------------------------------------------------------------
            -# Footer
            -# ----------------------------------------------------------------------------
            %section.footer
              .left
                %strong
                  - here.breadcrumbs.each do |pp|
                    %a{href: rel(here.path)}
                      = pp.title
                      - if pp.data['type']
                        %span.type= pp.data['type']

                    %span.arrow!= "&rsaquo;"

                  = here.title
                  - if here.data.here_type
                    %span.type= here.data.here_type

        -# ----------------------------------------------------------------------------
        -# Sidebar
        -# ----------------------------------------------------------------------------
        %nav#nav
          - parent   = (here.children.any? ? here : here.parent) || here
          - children = here.children.any? ? here.children : here.siblings
          - groups   = children.groups(:group)

          %nav.parents
            %ul
              - parent.breadcrumbs.each do |pp|
                %li
                  %a{href: rel(pp.path), class: ('active' if pp.path == here.path)}
                    - unless pp.path == here.path
                      %span.back!= "&lsaquo;"

                    %em= pp.data['type']
                    = pp

          - if groups.any?
            - groups.each do |name, heres|
              - name = name ? name : parent.to_s
              %nav
                - if name
                  %h4= name
                %ul
                  - heres.each do |pp|
                    %li
                      - classes = []
                      - classes << 'active'  if pp.path == here.path
                      - classes << 'more'    if pp.children.any?

                      %a{href: rel(pp.path), class: classes.join(' ')}
                        = pp

    %script{src: rel('/search_index.js')+"?#{Time.now.to_i}", type: 'text/javascript'}
