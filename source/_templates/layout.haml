!!!
%html
  %head
    %title= here.title

    %meta(charset='UTF-8')
    -# Use the latest IE engine, or Chrome frame.
    %meta(http-equiv='X-UA-Compatible' content='IE=edge,chrome=1')

    -# Mobile viewport optimization. j.mp/bplateviewport
    %meta(name='viewport' content='width=device-width, initial-scale=1.0')

    -# Standard SEO data
    - if here.data.keywords
      %data{:name => 'keywords', :content => here.data.keywords}
    - if here.data.description
      %data{:name => 'description', :content => here.data.brief}

    = stylesheet_link_tag 'site.css'

    != "<script src='http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js'></script>"
    != "<script src='http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js'></script>"
    %script{src: 'http://cdnjs.cloudflare.com/ajax/libs/jquery/1.6.2/jquery.min.js', type: 'text/javascript'}

    = javascript_include_tag 'proscribe.js'

  %body
    - if github
      %a{href: "https://github.com/#{github}"}
        %img(style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub")

    #top
      %a#logo{href: rel('/')}
        = site_name

    #area
      #content
        %section#search
          %input{type: "text", placeholder: "Search..."}
          %ul.results

        -# ============================================================================
        -# Content
        -# ============================================================================

        %div.c
          #crumbs
            - here.breadcrumbs[0..-2].each do |p|
              %a{href: rel(p.path)}= p
              %span.gt!= "&rarr;"

            %strong= here

          %hgroup
            %h1= here.title
            - if here.data.brief
              %h5= here.data.brief

          .content
            - if here.data.usage
              %h2 Usage
              %pre= here.data.usage

            != yield

            -# ----------------------------------------------------------------------------
            -# Footer
            -# ----------------------------------------------------------------------------
            %section.footer
              .left
                %strong
                  - here.breadcrumbs[0..-2].each do |pp|
                    %a{href: rel(pp.path)}
                      = pp.title
                      - if pp.data['type']
                        %span.type= pp.data['type']

                    %span.arrow!= "&rsaquo;"

                  = here.title
                  - if here.data.here_type
                    %span.type= here.data.here_type

        -# ----------------------------------------------------------------------------
        -# Sidebar
        -# ----------------------------------------------------------------------------
        %nav#nav
          - parent   = (here.children.any? ? here : here.parent) || here
          - children = here.children.any? ? here.children : here.siblings
          - groups   = children.groups(:group)

          %nav.parents
            %ul
              - parent.breadcrumbs.each do |pp|
                %li
                  %a{href: rel(pp.path), class: ('active' if pp.path == here.path)}
                    %span.back!= "&lsaquo;"
                    = pp

          - if groups.any?
            - groups.each do |name, heres|
              - name = name ? name : parent.to_s
              %nav
                - if name
                  %h4= name
                %ul
                  - heres.each do |pp|
                    %li
                      - classes = []
                      - classes << 'active'  if pp.path == here.path
                      - classes << 'more'    if pp.children.any?

                      %a{href: rel(pp.path), class: classes.join(' ')}
                        = pp

  = javascript_include_tag 'search_index.js', id: 'proscribe-js'
